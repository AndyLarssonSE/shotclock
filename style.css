:root{
  --gold:#d4af37;

  /* iOS safe areas (fallback to 0 if not supported) */
  --sat: env(safe-area-inset-top, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:#fff; }

/* Background */
body{
  background: url('assets/poolfelt.jpg') center/cover no-repeat fixed;
}

/* ====== GRID LAYOUT ====== */
/* Anchor the whole UI to the very top and avoid iOS “vh” jumps */
.app{
  max-width:1200px;
  margin:0 auto;
  /* use small top padding + safe area; zero out any accidental large spacing */
  padding-top: calc(var(--sat) + 6px);
  padding-left: calc(var(--sal) + clamp(6px,1vw,12px));
  padding-right: calc(var(--sar) + clamp(6px,1vw,12px));
  padding-bottom: calc(var(--sab) + clamp(6px,1vw,12px));

  display:grid;
  gap: clamp(6px,1.2vw,16px);

  /* key lines: occupy the whole small viewport height and START content at top */
  min-height: 100svh;
  align-content: start;
  justify-items: center;
}

/* Phone-first: stacked, no scrolling on modern phones */
.app{
  grid-template-columns: 1fr;
  grid-template-areas:
    "race"
    "timer"
    "logo"
    "pause"
    "start"
    "p1name"
    "p1score"
    "p1play"
    "p1plus"
    "p1ext"
    "p2name"
    "p2score"
    "p2play"
    "p2plus"
    "p2ext"
    "raceedit"
    "p1edit"
    "p2edit"
    "rscore"
    "credit";
}

/* iPad / desktop: 3 columns */
@media (min-width: 900px){
  .app{
    grid-template-columns: 1fr 1fr 1fr;
    grid-template-areas:
      "race    race   race"
      "p1name  timer  p2name"
      "p1score timer  p2score"
      "p1play  logo   p2play"
      "p1plus  pause  p2plus"
      "p1ext   start  p2ext"
      "p1edit  raceedit p2edit"
      ".       rscore ."
      ".       credit .";
  }
}

/* ====== AREAS ====== */
.race     { grid-area: race; text-align:center; }
.timer    { grid-area: timer; width:100%; display:flex; justify-content:center; }
.logoBox  { grid-area: logo; display:flex; align-items:center; justify-content:center; }
.pause    { grid-area: pause; }
.start    { grid-area: start; }
.p1name   { grid-area: p1name; }
.p2name   { grid-area: p2name; }
.p1score  { grid-area: p1score; }
.p2score  { grid-area: p2score; }
.p1play   { grid-area: p1play; }
.p2play   { grid-area: p2play; }
.p1plus   { grid-area: p1plus; }
.p2plus   { grid-area: p2plus; }
.p1ext    { grid-area: p1ext; }
.p2ext    { grid-area: p2ext; }
.p1edit   { grid-area: p1edit; }
.p2edit   { grid-area: p2edit; }
.raceedit { grid-area: raceedit; }
.rscore   { grid-area: rscore; }
.credit   { grid-area: credit; text-align:center; opacity:.25; font-weight:700; }

/* ====== TYPO / SIZES ====== */
.race-title{ font-weight:800; letter-spacing:.04em; text-shadow:0 2px 0 #0005; font-size: clamp(18px,2.2vw,28px); }
.race-value{ margin-top:4px; font-weight:800; text-shadow:0 2px 0 #0005; font-size: clamp(16px,2vw,24px); }

.name{ font-size: clamp(20px,3.8vw,40px); font-weight:900; text-shadow:0 4px 0 #0005; white-space:nowrap; margin:0; }
.name.win{ color:var(--gold); }
.name.lose{ color:#000; text-shadow:none; }

.score{ font-size: clamp(22px,4.2vw,48px); font-weight:900; text-shadow:0 4px 0 #0005; white-space:nowrap; margin:0; }

/* Timer never pushes other items because its block height is reserved */
.clock-wrap{
  width: 100%;
  height: clamp(100px,20vw,180px);
  display:flex; align-items:center; justify-content:center;
}
.clock{
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum";
  line-height:1; font-weight:900;
  text-shadow:0 10px 0 #0005;
  font-size: clamp(72px,14vw,160px);
  margin:0;
}
.clock.red{ color:#ffefef; text-shadow:0 0 20px #ff000055, 0 10px 0 #0005; }

/* Images / Buttons */
.imgbtn{ background:none; border:none; padding:0; cursor:pointer; }
.imgbtn img{ display:block; width: clamp(180px,28vw,320px); height:auto; user-select:none; -webkit-user-drag:none; }

.logoBox img{ width: clamp(80px,12vw,140px); height:auto; display:block; }

/* Toast */
#toast{
  position:fixed; left:50%; top:12%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.75); color:#fff;
  padding:10px 14px; border-radius:12px;
  font-weight:800; letter-spacing:.3px;
  opacity:0; pointer-events:none; transition:opacity .15s ease;
  z-index:10; font-size: clamp(14px,2.6vw,18px);
}
#toast.show{ opacity:1; }

/* Footer credit */
.credit{ font-size: clamp(12px,2.2vw,18px); margin-top:4px; }
